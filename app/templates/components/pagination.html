{#
  Pagination Component

  Usage:
    {% from "components/pagination.html" import render_pagination %}
    {{ render_pagination(".", activity_pagination, style="admin") }}
    {{ render_pagination("/admin/activity-logs", pagination, style="admin", extra_params=current_filters) }}

  Parameters:
    base_url: The base URL for pagination links (e.g., "." or "/admin/processes/123")
    pagination: Pagination dict with keys: page, total_pages
    style: Optional style variant ("admin" or "user", default="admin")
    extra_params: Optional dict of extra query params to preserve (e.g., {"action_type": "foo", "process_id": "bar"})
#}

{% macro render_pagination(base_url, pagination, style="admin", extra_params={}) %}
  {% if pagination.total_pages > 1 %}
  {% set extra_query = "" %}
  {% if extra_params %}
    {% for key, value in extra_params.items() %}
      {% if value %}
        {% set extra_query = extra_query ~ "&" ~ key ~ "=" ~ value %}
      {% endif %}
    {% endfor %}
  {% endif %}
  <div class="mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-slate-100 flex items-center justify-between">
    {% if pagination.page > 1 %}
    <a href="{{ base_url }}?activity_page={{ pagination.page - 1 }}{{ extra_query }}"
       class="text-xs sm:text-sm text-slate-600 {% if style == "user" %}hover:text-primary{% else %}hover:text-slate-900{% endif %}">
      ← Mais recentes
    </a>
    {% else %}
    <span class="text-xs sm:text-sm text-slate-300">← Mais recentes</span>
    {% endif %}

    <span class="text-xs text-slate-500">
      {{ pagination.page }} de {{ pagination.total_pages }}
    </span>

    {% if pagination.page < pagination.total_pages %}
    <a href="{{ base_url }}?activity_page={{ pagination.page + 1 }}{{ extra_query }}"
       class="text-xs sm:text-sm text-slate-600 {% if style == "user" %}hover:text-primary{% else %}hover:text-slate-900{% endif %}">
      Mais antigos →
    </a>
    {% else %}
    <span class="text-xs sm:text-sm text-slate-300">Mais antigos →</span>
    {% endif %}
  </div>
  {% endif %}
{% endmacro %}
